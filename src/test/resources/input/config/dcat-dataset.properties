
# =============================================================================
# DCAT-AP-NL-GDN ? DATASET mapping
# -----------------------------------------------------------------------------
# Subject:
#   We use the Dataverse persistent URL as the dataset IRI (e.g., DOI landing).
# JSON root:
#   ExportData serializes with a top-level 'datasetJson' wrapper, so all paths
#   start with $.datasetJson...
# JSONPath engine:
#   Expressions are Jayway JSONPath. Use '..' (recursive descent) where we want
#   to be robust against small structural shifts in metadataBlocks.
# Notes:
#   If your ExportData uses 'primitiveValue' for Dataverse primitives, change
#   '.value' to '.primitiveValue' on the relevant lines (title/description/keywords).
# Vocabularies:
#   - Access Rights: EU Named Authority List (PUBLIC, RESTRICTED, NON_PUBLIC)
#   - Data Themes:  EU Data Theme vocabulary (dcat:theme)
#   - See: EU Vocabularies NALs and File-Type; IANA for media types.
#     https://op.europa.eu/en/web/eu-vocabularies/  |  https://www.iana.org/assignments/media-types/media-types.xhtml
# =============================================================================

# ----- Subject IRI (dataset)
subject.iri.json = $.datasetJson.persistentUrl

# ----- Title (EN/NL) ? citation.title (1..n)
# Dataverse: metadataBlocks.citation.fields[typeName='title'].value
props.title_en.predicate = dct:title
props.title_en.as = literal
props.title_en.lang = en
props.title_en.json = $.datasetJson.datasetVersion.metadataBlocks.citation.fields[?(@.typeName=='title')].value

props.title_nl.predicate = dct:title
props.title_nl.as = literal
props.title_nl.lang = nl
props.title_nl.json = $.datasetJson.datasetVersion.metadataBlocks.citation.fields[?(@.typeName=='title')].value

# ----- Description (EN/NL) ? citation.dsDescription[0].dsDescriptionValue.value (1..n)
props.description_en.predicate = dct:description
props.description_en.as = literal
props.description_en.lang = en
props.description_en.json = $.datasetJson.datasetVersion.metadataBlocks.citation.fields[?(@.typeName=='dsDescription')].value[0].dsDescriptionValue.value

props.description_nl.predicate = dct:description
props.description_nl.as = literal
props.description_nl.lang = nl
props.description_nl.json = $.datasetJson.datasetVersion.metadataBlocks.citation.fields[?(@.typeName=='dsDescription')].value[0].dsDescriptionValue.value

# ----- Identifier ? datasetPersistentId (1..1)
props.identifier.predicate = dct:identifier
props.identifier.as = literal
props.identifier.json = $.datasetJson.datasetVersion.datasetPersistentId

# ----- Access Rights ? dct:accessRights (1..1)
# Map internal codes to EU Access-Right Named Authority List concept URIs.  [4](https://codingtechroom.com/tutorial/java-maven-surefire-plugin-guide)
props.accessRights.predicate = dct:accessRights
props.accessRights.as = iri
props.accessRights.json = $..GDNDatasetMetadata.fields[?(@.typeName=='GDNaccessRights')].value
props.accessRights.map.public = http://publications.europa.eu/resource/authority/access-right/PUBLIC
props.accessRights.map.restricted = http://publications.europa.eu/resource/authority/access-right/RESTRICTED
props.accessRights.map.non-public = http://publications.europa.eu/resource/authority/access-right/NON_PUBLIC

# ----- Theme ? dcat:theme (1..n)
# Map your domain codes to EU Data Theme URIs.  [1](https://maven.apache.org/surefire/maven-surefire-plugin/examples/single-test.html)
props.theme.predicate = dcat:theme
props.theme.as = iri
props.theme.multi = true
props.theme.json = $..GDNDatasetMetadata.fields[?(@.typeName=='GDNtheme')].value[*]
props.theme.map.ener = http://publications.europa.eu/resource/authority/data-theme/ENER
props.theme.map.tech = http://publications.europa.eu/resource/authority/data-theme/TECH

# ----- Keywords ? dcat:keyword (0..n)
props.keyword_en.predicate = dcat:keyword
props.keyword_en.as = literal
props.keyword_en.lang = en
props.keyword_en.multi = true
props.keyword_en.json = $.datasetJson.datasetVersion.metadataBlocks.citation.fields[?(@.typeName=='keyword')].value[*].keywordValue.value

props.keyword_nl.predicate = dcat:keyword
props.keyword_nl.as = literal
props.keyword_nl.lang = nl
props.keyword_nl.multi = true
props.keyword_nl.json = $.datasetJson.datasetVersion.metadataBlocks.citation.fields[?(@.typeName=='keyword')].value[*].keywordValue.value

# ----- Publisher ? dct:publisher (1..1) as a foaf:Agent node
nodes.publisher.kind = bnode
nodes.publisher.type = foaf:Agent
nodes.publisher.props.type.predicate = dct:type
nodes.publisher.props.type.as = iri
nodes.publisher.props.type.const = https://ror.org/01bnjb948
nodes.publisher.props.name_nl.predicate = foaf:name
nodes.publisher.props.name_nl.as = literal
nodes.publisher.props.name_nl.lang = nl
nodes.publisher.props.name_nl.const = Nederlandse Organisatie voor Toegepast Natuurwetenschappelijk Onderzoek (nl), TNO
nodes.publisher.props.name_en.predicate = foaf:name
nodes.publisher.props.name_en.as = literal
nodes.publisher.props.name_en.lang = en
nodes.publisher.props.name_en.const = Netherlands Organisation for Applied Scientific Research

props.publisher.predicate = dct:publisher
props.publisher.as = node-ref
props.publisher.node = publisher

# ----- Contact Point ? dcat:contactPoint (1..1) as vcard:Kind node
nodes.contact.kind = bnode
nodes.contact.type = vcard:Kind
nodes.contact.props.email.predicate = vcard:hasEmail
nodes.contact.props.email.as = iri
nodes.contact.props.email.const = mailto:support@geologischedienst.nl
nodes.contact.props.url.predicate = vcard:hasURL
nodes.contact.props.url.as = iri
nodes.contact.props.url.const = https://www.geologischedienst.nl/contact/
nodes.contact.props.fn_nl.predicate = vcard:fn
nodes.contact.props.fn_nl.as = literal
nodes.contact.props.fn_nl.lang = nl
nodes.contact.props.fn_nl.const = Geologische Dienst Nederland
nodes.contact.props.fn_en.predicate = vcard:fn
nodes.contact.props.fn_en.as = literal
nodes.contact.props.fn_en.lang = en
nodes.contact.props.fn_en.const = Geological Survey of the Netherlands

props.contactPoint.predicate = dcat:contactPoint
props.contactPoint.as = node-ref
props.contactPoint.node = contact

# ----- Applicable Legislation ? dcatap:applicableLegislation (0..n; HVD)
props.appLeg.predicate = dcatap:applicableLegislation
props.appLeg.as = iri
props.appLeg.multi = true
props.appLeg.json = $..GDNDatasetMetadata.fields[?(@.typeName=='GDNhvdApplicableLegislation')].value[*]
props.appLeg.map.eu_2023_138 = http://data.europa.eu/eli/reg_impl/2023/138/oj

# ----- HVD Category ? dcatap:hvdCategory (0..n; HVD)
props.hvdCategory.predicate = dcatap:hvdCategory
props.hvdCategory.as = iri
props.hvdCategory.multi = true
props.hvdCategory.json = $..GDNDatasetMetadata.fields[?(@.typeName=='GDNhvdCategory')].value[*]
props.hvdCategory.map.geology = http://publications.europa.eu/resource/dataset/high-value-dataset-category/GEOLOGY
